%!TEX TS-program = xelatex
% vim: set fenc=utf-8

% -*- coding: UTF-8; -*-
%!TEX encoding = UTF-8
\documentclass[twoside]{CUGThesis}

\include{statement}
\include{title}

\title{基于IPv6的HTTP/2过渡应用的设计与实现} %论文题目
\author{陈立翔} %作者姓名
\date{\today} %日期，默认当日
\school{计算机学院} %院系名称
\classnum{计算机科学与技术} %专业
\stunum {20151001270} %学号
\instructorone{张峰} %指导教师1姓名
\instructoronelevel{副教授}
\instructortwo{陈伟涛} %指导教师2姓名
\instructortwolevel{副教授}

\usepackage{makecell}
\usepackage{multicol}
\usepackage{multirow}
\usepackage{hyperref}

\begin{document}
	\maketitle
	\makestatement

	\begin{cnabstract}{IPv6 协议；HTTP/2协议；HTTP 网关；反向代理；负载均衡；Go语言；}
		今天，网络早已成为人们生活中不可缺少的部分。同时随着我国网民人口的不断增长，
	互联网环境正在变得愈发复杂。在服务端，开发和运维人员需要利用有限的服务器资源应对更大的并发请求和越来越多的潜在的网络攻击。
	在这种情况下，原有的一些网络协议已经无法满足要求。目前，IPv4的公网地址资源已经枯竭，早在2011年
	亚洲地区就已经无法分配到IPv4地址；而HTTP/1.x协议经过若干次修订后依然被诟病效率过低和功能不足。
	RFC 发布的 IPv6和HTTP/2协议相关标准已经在很大程度上解决了这些问题，
	如何将旧有的Web应用过渡支持IPv6和HTTP/2是我们目前面临的重要挑战。\par
		本文对于如何让现有的IPv4环境下仅支持HTTP/1.x协议的Web应用能够在IPv4和IPv6双栈环境下工作并
	支持HTTP/2协议，同时尽可能提高服务端的并发性能，开展了以下研究工作：
	\begin{enumerate}
		\item 通过对 Go 语言技术的深入研究，分析其协程和并发模型的技术特点。Go 语言是一门在语言层面
		实现了协程的语言，其实现能够避免操作系统调用产生的开销，单机轻松构建百万级协程，CPU资源的利用率极高，
		是近年来服务端开发中解决高并发问题的重要突破点。
		\item 比较了 RFC 标准中 HTTP/1.x 和 HTTP/2 报文的区别，分析了如何将 HTTP/1.x 的报文加工处理
		成 HTTP/2 的报文。同时结合 Go 语言中原生的 net/http 和 tls 库对报文增加 HTTPS 加密，从而
		兼容目前主流浏览器的实现。
		\item 为了将 HTTP/1.x 应用过渡支持 HTTP/2 ,本文采用 Go 语言技术设计了一个 HTTP 网关。该网关
		通过反向代理技术，在无需对原有应用进行任何修改的情况下，将其升级为支持 HTTP/2 协议，并可在 IPv4和
		IPv6双栈环境下工作。
		\item 基于 Weighted Round Robin 算法和 Consistent Hashing 算法对该网关设计了负载均衡策略，
		使得该网关能够支持横向扩容的 Web 应用，应对更复杂的并发情况。
		\item 对该网关进行了压力测试，对比目前市场上提供反向代理功能的服务器如 Apache， Nginx 等，
		得出该网关在一些情况下能够提高系统并发数和减少响应时间，提升用户体验。并通过火焰图分析该网关在
		实际工作环境中的性能瓶颈。
	\end{enumerate}
		\par
		综上所述，本文设计的基于 Go 语言的 HTTP 反向代理网关，能够作为在IPv4和IPv6双栈环境下的 HTTP/2 过渡应用，
	并且具有较好的并发性能。经过测试，具有一定实用价值。
	\end{cnabstract}
	
	\begin{enabstract}{keyword; keyword; keyword; keyword}
		abstract
	\end{enabstract}
	
	\makeToc
	
	%---------------------------------------------开始正文---------------------------------------------
	
	%--------------------------------------------- 第一章 ---------------------------------------------
	\begin{spacing}{2}
		\section{绪论}
	\end{spacing}
	\subsection{研究背景及其意义}
	各种网络协议常常被称为互联网时代的基石。随着网络环境的变化，网络协议也需要适应时代的需求
	迭代升级。\par
	从1996年开始，一系列关于IPv6协议的RFC标准发表出来，旨在取代原有的IPv4协议。IPv6的地址长度为
	128位，能提供远多于IPv4 的地址数量。在IPv6环境下，将不需要IPv4环境下为了解决地址数量不足而衍生出的NAT等技术，每个设备都能得到
	一个公网IP，有利于物联网等技术的发展。但IPv6技术的推进还需要一段时间，在未来一段时间内我们都将
	面临着IPv4和IPv6共存的互联网环境。\par
		2015年发布的HTTP/2协议则旨在取代HTTP/1.x协议。为了提高网络传输的效率，更有效地利用网络资源，
	该协议增加了二进制分帧，多路复用和头部压缩等新的特性。同时目前浏览器中 HTTP/2 
	实现都强制要求数据通过 HTTPS 加密，而不是像 HTTP/1.x 协议那样
	将数据明文发送。这显著增强了数据传输的安全性，有效避免数据被劫持等安全隐患。\par
	\subsection{国内外相关工作介绍}
	目前国内外市场上90\%以上的反向代理HTTP服务器为Apache 和 Nginx。这两者都基于C语言编写也有很多人对这些网关进行了二次开发，例如中国工程师章亦春等人基于Nginx开发的OpenResty\cite{OpenResty}等。\par
	这些网关在不断的迭代过程中也陆续加入了IPv6和HTTP/2协议的支持。它们由于久经实际生产环境考验，具有较强的稳定性。
	但由于一些历史遗留原因，也或多或少存在诸如开发效率较低，并发能力较差等问题。
	\subsubsection{Apache}

	\subsubsection{Nginx}

	\subsection{论文主要工作和章节结构}
	
	
	%------------------------------------------- 第二章 ---------------------------------------------
	\begin{spacing}{2}
		\section{Go语言服务端相关技术介绍}
	\end{spacing}
	\subsection{Go语言简介}
	Go语言（简称Go）是由美国谷歌（Google）公司发布的一种静态强类型、编译型、并发型并具有垃圾回收功能的编程语言，于2009年推出最初版本并开源。
	其作者 Rob Pike 和 Ken Thompson 等人均曾经在美国贝尔实验室工作，参与了C语言和Unix系统的开发工作。\par 
	Go的发明是为了解决C++在服务端开发时的一些问题。在高并发环境下，C++由于其过多的语言特性，导致编写并发程序较为复杂。
	同时其较为落后的包管理机制不利于对代码的高效复用。依赖于系统底层API的网络操作等也使得其跨平台能力不强。\par
	Go本身语法十分接近C语言，甚至比C语言还要更简单一些，其关键字数量比C语言还要更少。对于有一定C语言开发经验的开发者来说学习成本较低。
	Go内置大量网络编程相关的库，可以大大简化网络编程的工作，更重要的是，其实现不依赖于任何操作系统底层API，
	这使得Go编写的程序可以较为容易地在多平台允许。\par
	Go程序以包的形式组织。包实质上是一个包含Go文件的文件夹。包内的代码共享相同的命名空间，为区分包内
	包外的私有成员，Go将以大写字母开头的对象（包括函数，变量等）对其它包可见，其它的则不可见。\par 
	\subsection{Go语言的并发模型}
	Go语言最为重要的特性来源于其在语言层面对并发的支持。
	\subsubsection{协程（Coroutine）}
	我们知道，线程和进程都是在操作系统层面上实现的。相对于进程来说，线程可以减少调用时的上下文开销。
	\subsubsection{通道（Channel）}
	\subsubsection{上下文（Context）}
	
	
	
	%--------------------------------------------- 第三章 ---------------------------------------------
	\begin{spacing}{2}
		\section{HTTP/1.x到HTTP/2的转换实现}
	\end{spacing}
	引言
	\subsection{HTTP/2的新增特性}
	
	\subsection{HTTP/2协商机制}
	表示例（表\ref{Tab:test}）

	%-- 第四章
	\begin{spacing}{2}
		\section{}
	\end{spacing}
	
	
	%---------------------------------------------  致谢  ---------------------------------------------
	\begin{spacing}{2}
		\section*{致谢}
	\end{spacing}
	\phantomsection
	\addcontentsline{toc}{section}{致谢}
	
	致谢
	
	\clearpage
	%---------------------------------------------参考文献---------------------------------------------
	
	\bibliography{Bibs/mybib}
	\phantomsection
	\addcontentsline{toc}{section}{参考文献}
	
\end{document}